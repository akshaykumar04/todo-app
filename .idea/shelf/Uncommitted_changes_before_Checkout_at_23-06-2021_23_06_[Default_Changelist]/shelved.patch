Index: app/src/main/java/com/sstechcanada/todo/activities/AddCategoryActivity2.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.sstechcanada.todo.activities;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.text.TextUtils;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.WindowManager;\r\nimport android.widget.AdapterView;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ListView;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.AppCompatImageView;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.airbnb.lottie.LottieAnimationView;\r\nimport com.firebase.ui.firestore.FirestoreRecyclerOptions;\r\nimport com.google.android.gms.ads.AdRequest;\r\nimport com.google.android.gms.ads.AdView;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.CollectionReference;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.EventListener;\r\nimport com.google.firebase.firestore.FieldValue;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.FirebaseFirestoreException;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\nimport com.google.firebase.firestore.SetOptions;\r\nimport com.sstechcanada.todo.R;\r\nimport com.sstechcanada.todo.activities.auth.LoginActivity;\r\nimport com.sstechcanada.todo.adapters.CategoryAdapter;\r\nimport com.sstechcanada.todo.adapters.CategoryFirestoreAdapter;\r\nimport com.sstechcanada.todo.adapters.MasterListFirestoreAdapter;\r\nimport com.sstechcanada.todo.models.Category;\r\nimport com.sstechcanada.todo.models.List;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport es.dmoral.toasty.Toasty;\r\n\r\nimport static com.sstechcanada.todo.activities.MasterTodoListActivity.listName;\r\nimport static com.sstechcanada.todo.activities.MasterTodoListActivity.purchaseCode;\r\n\r\npublic class AddCategoryActivity2 extends AppCompatActivity {\r\n\r\n    //view objects\r\n    EditText editTextName;\r\n    Button buttonAddCategory;\r\n//    ListView listViewCategory;\r\n    TextView toolBarTitle;\r\n    private AppCompatImageView toolbar_profile, toolbarBackIcon;\r\n//    List<Category> categories;\r\n    String userID;\r\n    private FirebaseAuth mAuth;\r\n    RecyclerView recyclerViewCat;\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    CollectionReference benefitCollectionRef;\r\n    CollectionReference UserColRef;\r\n    CategoryFirestoreAdapter categoryFirestoreAdapter;\r\n    public static ProgressBar progressBar;\r\n\r\n\r\n\r\n    public static void showProgressbar() {\r\n        progressBar.setVisibility(View.VISIBLE);\r\n    }\r\n\r\n    public static void hideProgressbar() {\r\n        progressBar.setVisibility(View.INVISIBLE);\r\n    }\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_category);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        userID=mAuth.getCurrentUser().getUid();\r\n        benefitCollectionRef=db.collection(\"Users\").document(userID).collection(\"Benefits\");\r\n        UserColRef=db.collection(\"Users\").document(userID).collection(\"Lists\");\r\n        editTextName = findViewById(R.id.editTextName);\r\n        progressBar=findViewById(R.id.progressCat);\r\n        recyclerViewCat = findViewById(R.id.listViewCategory);\r\n        toolbarBackIcon = findViewById(R.id.arrow_back);\r\n        toolbarBackIcon.setVisibility(View.VISIBLE);\r\n        toolbarBackIcon.setOnClickListener(view -> {\r\n            super.onBackPressed();\r\n        });\r\n\r\n        setUpRecyclerView();\r\n\r\n\r\n        buttonAddCategory = findViewById(R.id.buttonAddCategory);\r\n//        /**/ categories = new ArrayList<>();\r\n\r\n        toolBarTitle = findViewById(R.id.toolbarTitle);\r\n        toolBarTitle.setText(\"Add Benefits\");\r\n\r\n        toolbar_profile = findViewById(R.id.profile_toolbar);\r\n        toolbar_profile.setOnClickListener(view -> startActivity(new Intent(AddCategoryActivity2.this, LoginActivity.class) ));\r\n\r\n        buttonAddCategory.setOnClickListener(view -> addCategory());\r\n\r\n\r\n\r\n\r\n\r\n//        listViewCategory.setOnItemClickListener((adapterView, view, i, l) -> {\r\n//\r\n//            Category category = categories.get(i);\r\n//            showUpdateDialog(category.getCategoryId(), category.getCategoryName());\r\n//\r\n////                //creating an intent\r\n////                Intent intent = new Intent(getApplicationContext(), CategoryActivity.class);\r\n////\r\n////                //putting category name and id to intent\r\n////                intent.putExtra(CATEGORY_ID, category.getCategoryId());\r\n////                intent.putExtra(CATEGORY_NAME, category.getCategoryName());\r\n////\r\n////                //starting the activity with intent\r\n////                startActivity(intent);\r\n//        });\r\n//\r\n//        listViewCategory.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {\r\n//            @Override\r\n//            public boolean onItemLongClick(AdapterView<?> adapterView, View view, int i, long l) {\r\n//                Category category = categories.get(i);\r\n//                showUpdateDialog(category.getCategoryId(), category.getCategoryName());\r\n//                return true;\r\n//            }\r\n//        });\r\n\r\n        if(purchaseCode.equals(\"0\")){\r\n            AdView adView = findViewById(R.id.adView);\r\n            AdRequest adRequest = new AdRequest.Builder().build();\r\n            adView.loadAd(adRequest);\r\n        }\r\n    }\r\n\r\n    public  void  setUpRecyclerView(){\r\n        Query query = benefitCollectionRef;\r\n        FirestoreRecyclerOptions<Category> options=new FirestoreRecyclerOptions.Builder<Category>().setQuery(query,Category.class).build();\r\n        categoryFirestoreAdapter = new CategoryFirestoreAdapter(options, this);\r\n        recyclerViewCat.setHasFixedSize(true);\r\n        recyclerViewCat.setLayoutManager(new LinearLayoutManager(this));\r\n        recyclerViewCat.setAdapter(categoryFirestoreAdapter);\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        categoryFirestoreAdapter.startListening();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        categoryFirestoreAdapter.stopListening();\r\n    }\r\n\r\n    /*\r\n     * This method is saving a new category to the\r\n     * Firebase Realtime Database\r\n     * */\r\n    private void addCategory() {\r\n        //getting the values to save\r\n        String name = editTextName.getText().toString().trim();\r\n\r\n        //checking if the value is provided\r\n        if (!name.isEmpty()) {\r\n\r\n            DocumentReference documentReferenceCurrentReference=benefitCollectionRef.document();\r\n            Map<String,String> category =new HashMap<>();\r\n            category.put(\"category_name\",name);\r\n\r\n\r\n            documentReferenceCurrentReference.set(category, SetOptions.merge()).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                @Override\r\n                public void onSuccess(Void aVoid) {\r\n                    Toasty.success(getApplicationContext(), \"Benefit added\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }).addOnFailureListener(new OnFailureListener() {\r\n                @Override\r\n                public void onFailure(@NonNull Exception e) {\r\n                    Toasty.error(getApplicationContext(), \"Benefit addition Failed: \", Toast.LENGTH_LONG).show();\r\n                }\r\n            });\r\n\r\n            //getting a unique id using push().getKey() method\r\n            //it will create a unique id and we will use it as the Primary Key for our Category\r\n//            String id = databaseCategories.push().getKey();\r\n//\r\n//            //Making first word capital\r\n//            name = name.substring(0, 1).toUpperCase() + name.substring(1);\r\n//            //creating an Category Object\r\n//            Category category = new Category(id, name);\r\n//\r\n//            //Saving the Category\r\n//            databaseCategories.child(id).setValue(category);\r\n\r\n            //setting edittext to blank again\r\n            editTextName.setText(\"\");\r\n\r\n            //displaying a success toast\r\n\r\n        } else {\r\n            //if the value is not given displaying a toast\r\n            Toasty.warning(this, \"Please enter a name\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n\r\n//    @Override\r\n//    protected void onStart() {\r\n//        super.onStart();\r\n        //attaching value event listener\r\n//       benefitCollectionRef.addSnapshotListener(new EventListener<QuerySnapshot>() {\r\n//            @Override\r\n//            public void onEvent(@Nullable QuerySnapshot value, @Nullable FirebaseFirestoreException error) {\r\n//                categories.clear();\r\n//\r\n//                //iterating through all the nodes\r\n//                benefitCollectionRef.get().addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n//                    @Override\r\n//                    public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n//                        for(DocumentSnapshot dataSnapshot:queryDocumentSnapshots){\r\n//                            Category category = new Category(dataSnapshot.getId(),(String) dataSnapshot.get(\"category_name\"));\r\n//                            categories.add(category);\r\n//                        }\r\n//                        CategoryAdapter categotyAdapter = new CategoryAdapter(AddCategoryActivity2.this, categories);\r\n//                        //attaching adapter to the listview\r\n//                        listViewCategory.setAdapter(categotyAdapter);\r\n//                    }\r\n//                }).addOnFailureListener(new OnFailureListener() {\r\n//                    @Override\r\n//                    public void onFailure(@NonNull Exception e) {\r\n//                        Toasty.error(getApplicationContext(), \"Benefit fetch failed \", Toast.LENGTH_LONG).show();\r\n//                    }\r\n//                });\r\n//\r\n//            }\r\n//        });\r\n\r\n       //clearing the previous category list\r\n\r\n//                for (DataSnapshot postSnapshot : dataSnapshot.getChildren()) {\r\n//                    Category category = postSnapshot.getValue(Category.class);\r\n//                    categories.add(category);\r\n//                }\r\n\r\n                //creating adapter\r\n\r\n//    }\r\n\r\n//    private void showUpdateDialog(final String categoryId, String categoryName) {\r\n//\r\n//        AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(this);\r\n//        LayoutInflater inflater = getLayoutInflater();\r\n//        final View dialogView = inflater.inflate(R.layout.update_dialog, null);\r\n//        dialogBuilder.setView(dialogView);\r\n//\r\n//        final EditText editTextName = dialogView.findViewById(R.id.editTextName);\r\n//        final Button buttonUpdate = dialogView.findViewById(R.id.buttonUpdateCategory);\r\n//        final Button buttonDelete = dialogView.findViewById(R.id.buttonDeleteCategory);\r\n//\r\n//        dialogBuilder.setTitle(categoryName);\r\n//        final AlertDialog b = dialogBuilder.create();\r\n//        b.show();\r\n//\r\n//        buttonUpdate.setOnClickListener(view -> {\r\n//            String name = editTextName.getText().toString().trim();\r\n//            if (!TextUtils.isEmpty(name)) {\r\n//                updateCategory(categoryId, name, categoryName);\r\n//                b.dismiss();\r\n//            } else {\r\n//                Toasty.warning(this, \"Please enter a Benefit name\", Toast.LENGTH_SHORT).show();\r\n//            }\r\n//        });\r\n//\r\n//        buttonDelete.setOnClickListener(view -> {\r\n//            androidx.appcompat.app.AlertDialog.Builder alert = new androidx.appcompat.app.AlertDialog.Builder(this);\r\n//            alert.setTitle(R.string.delete_benefit);\r\n//            alert.setMessage(R.string.delete_benefit_message);\r\n//            alert.setPositiveButton(\r\n//                    R.string.yes,\r\n//                    (dialog, id) -> deleteCategory(categoryId, categoryName));\r\n//            b.dismiss();\r\n//\r\n//            alert.setNegativeButton(\r\n//                    R.string.no,\r\n//                    (dialog, id) -> dialog.dismiss());\r\n//            alert.show();\r\n//\r\n//        });\r\n//\r\n//    }\r\n\r\n\r\n//    private void updateCategory(String id, String name,String oldName) {\r\n//        //getting the specified category reference\r\n//        DocumentReference documentReferenceBenefitReference=benefitCollectionRef.document(id);\r\n//\r\n////      DatabaseReference dR = FirebaseDatabase.getInstance().getReference(\"categories\").child(id);\r\n//        //updating category\r\n//        //getting the specified category reference\r\n//        DocumentReference documentReferenceBenefit=benefitCollectionRef.document(id);\r\n//        //removing category\r\n//        documentReferenceBenefitReference.update(\"category_name\",name).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n//            @Override\r\n//            public void onSuccess(Void aVoid) {\r\n////                Toasty.success(getApplicationContext(), \"Benefit Updated\", Toast.LENGTH_SHORT).show();\r\n//                updateCategoryFromEachTodo(name,oldName);\r\n//\r\n//            }\r\n//        }).addOnFailureListener(new OnFailureListener() {\r\n//            @Override\r\n//            public void onFailure(@NonNull Exception e) {\r\n//                Toasty.error(getApplicationContext(), \"Something went wrong!\", Toast.LENGTH_SHORT).show();\r\n//            }\r\n//        });\r\n////        Category category = new Category(id, name);\r\n////        documentReferenceBenefitReference.update(\"category_name\",name);\r\n////        Toasty.success(getApplicationContext(), \"Benefits Updated\", Toast.LENGTH_SHORT).show();\r\n//    }\r\n\r\n//    private void updateCategoryFromEachTodo(String categoryNameToBeUpdated, String oldCategoryName) {\r\n//\r\n//        UserColRef.get().addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n//            @Override\r\n//            public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n//                for(DocumentSnapshot documentSnapshot:queryDocumentSnapshots){\r\n//\r\n//                    UserColRef.document(documentSnapshot.getId()).collection(\"Todo\").get().addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n//                        @Override\r\n//                        public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n//                            for(DocumentSnapshot documentSnapshotInner:queryDocumentSnapshots){\r\n//                                UserColRef.document(documentSnapshot.getId()).collection(\"Todo\").document(documentSnapshotInner.getId()).update(\"Benefits\", FieldValue.arrayRemove(oldCategoryName),\"Benefits\",FieldValue.arrayUnion(categoryNameToBeUpdated)).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n//                                    @Override\r\n//                                    public void onSuccess(Void aVoid) {\r\n//\r\n//                                    }\r\n//                                }).addOnFailureListener(new OnFailureListener() {\r\n//                                    @Override\r\n//                                    public void onFailure(@NonNull Exception e) {\r\n//\r\n//                                    }\r\n//                                });\r\n//                            }\r\n//\r\n//                            Toasty.success(getApplicationContext(), \"Benefit Updated\", Toast.LENGTH_SHORT).show();\r\n//                        }\r\n//                    }).addOnFailureListener(new OnFailureListener() {\r\n//                        @Override\r\n//                        public void onFailure(@NonNull Exception e) {\r\n//\r\n//                        }\r\n//                    });\r\n//                }\r\n//            }\r\n//        });\r\n//    }\r\n\r\n\r\n//    private void deleteCategory(String id,String categoryName) {\r\n//        //getting the specified category reference\r\n//        DocumentReference documentReferenceBenefitReference=benefitCollectionRef.document(id);\r\n//        //removing category\r\n//        documentReferenceBenefitReference.delete().addOnSuccessListener(new OnSuccessListener<Void>() {\r\n//            @Override\r\n//            public void onSuccess(Void aVoid) {\r\n//                Toasty.success(getApplicationContext(), \"Benefit Deleted\", Toast.LENGTH_SHORT).show();\r\n//                deleteCategoryFromEachTodo(categoryName);\r\n//            }\r\n//        }).addOnFailureListener(new OnFailureListener() {\r\n//            @Override\r\n//            public void onFailure(@NonNull Exception e) {\r\n//                Toasty.error(getApplicationContext(), \"Something went wrong!\", Toast.LENGTH_SHORT).show();\r\n//            }\r\n//        });\r\n//\r\n//    }\r\n\r\n//    private void deleteCategoryFromEachTodo(String categoryToBeDeletedName) {\r\n//\r\n//        UserColRef.get().addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n//            @Override\r\n//            public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n//                for(DocumentSnapshot documentSnapshot:queryDocumentSnapshots){\r\n//                    Log.i(\"DeletionLogs\", \"B\"+documentSnapshot.getId());\r\n//                    UserColRef.document(documentSnapshot.getId()).collection(\"Todo\").get().addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n//                        @Override\r\n//                        public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n//                            for(DocumentSnapshot documentSnapshotInner:queryDocumentSnapshots){\r\n//                                UserColRef.document(documentSnapshot.getId()).collection(\"Todo\").document(documentSnapshotInner.getId()).update(\"Benefits\", FieldValue.arrayRemove(categoryToBeDeletedName),\"priority\",FieldValue.increment(-1)).addOnSuccessListener(new OnSuccessListener<Void>() {\r\n//                                    @Override\r\n//                                    public void onSuccess(Void aVoid) {\r\n//                                        Log.i(\"DeletionLogs\", \"Benefit Deleted From Each To-Do!\");\r\n//                                    }\r\n//                                }).addOnFailureListener(new OnFailureListener() {\r\n//                                    @Override\r\n//                                    public void onFailure(@NonNull Exception e) {\r\n//                                        Log.i(\"DeletionLogs\",\"Benefit Not Deleted From Each To-Do!\");\r\n//                                    }\r\n//                                });\r\n//                            }\r\n//                        }\r\n//                    }).addOnFailureListener(new OnFailureListener() {\r\n//                        @Override\r\n//                        public void onFailure(@NonNull Exception e) {\r\n//                            Log.i(\"DeletionLogs\", \"Bnoasdjfoad\");\r\n//                        }\r\n//                    });\r\n//                }\r\n//            }\r\n//        });\r\n//    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/sstechcanada/todo/activities/AddCategoryActivity2.java	(revision 30633a22d5bac0dc00e837bd6526d4feacfb82b6)
+++ app/src/main/java/com/sstechcanada/todo/activities/AddCategoryActivity2.java	(date 1624469388129)
@@ -94,6 +94,7 @@
         userID=mAuth.getCurrentUser().getUid();
         benefitCollectionRef=db.collection("Users").document(userID).collection("Benefits");
         UserColRef=db.collection("Users").document(userID).collection("Lists");
+
         editTextName = findViewById(R.id.editTextName);
         progressBar=findViewById(R.id.progressCat);
         recyclerViewCat = findViewById(R.id.listViewCategory);
